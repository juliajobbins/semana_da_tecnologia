<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>âš½ Futebol Legal â€” IA</title>
<style>
  body {
    margin: 0;
    text-align: center;
    background-color: #ffe3ef;
    font-family: "Comic Sans MS", sans-serif;
    color: #ff7da4;
  }
  h1 { margin-top: 20px; color: #ff7da4; text-shadow: 1px 1px #fff; }
  canvas {
    background-color: #fff5f9;
    border: 4px solid #ffbad9;
    border-radius: 10px;
    display: block;
    margin: 20px auto;
  }
  #placar { font-size: 20px; margin-top: 10px; }
  button {
    background-color: #ffbad9;
    color: #6e3f55;
    border: none;
    padding: 10px 20px;
    border-radius: 10px;
    font-size: 16px;
    cursor: pointer;
    margin-top: 10px;
    transition: 0.3s;
  }
  button:hover { background-color: #ff7da4; color: white; }
</style>
</head>
<body>
<h1>âš½ Futebol Legal ðŸ’–</h1>
<div id="placar">Azul 0 x 0 Rosa</div>
<canvas id="campo" width="600" height="400"></canvas>
<button onclick="reiniciarJogo()">Reiniciar</button>
<label><input type="checkbox" id="ativarIA" /> Ativar IA (solo)</label>

<script>
const canvas = document.getElementById("campo");
const ctx = canvas.getContext("2d");

const jogadorAzul = { x: 100, y: 200, cor: "#7daaff" };
const jogadorRosa = { x: 500, y: 200, cor: "#ff7da4" };
const bola = { x: 300, y: 200, dx: 0, dy: 0, raio: 10 };

let golsAzul = 0;
let golsRosa = 0;
let iaAtiva = false;

const keys = {};
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

function desenharCampo() {
  ctx.fillStyle = "#fff5f9";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.strokeStyle = "#ffbad9";
  ctx.lineWidth = 3;
  ctx.strokeRect(10, 10, 580, 380);
  ctx.beginPath();
  ctx.moveTo(300, 10);
  ctx.lineTo(300, 390);
  ctx.stroke();
  ctx.fillStyle = "#ffbad9";
  ctx.fillRect(0, 150, 10, 100);
  ctx.fillRect(590, 150, 10, 100);
}

function desenharJogador(j) {
  ctx.fillStyle = j.cor;
  ctx.beginPath();
  ctx.arc(j.x, j.y, 15, 0, Math.PI * 2);
  ctx.fill();
}

function desenharBola() {
  ctx.fillStyle = "#f9c6e2";
  ctx.beginPath();
  ctx.arc(bola.x, bola.y, bola.raio, 0, Math.PI * 2);
  ctx.fill();
}

function moverJogadores() {
  if (keys["w"] && jogadorAzul.y > 25) jogadorAzul.y -= 3;
  if (keys["s"] && jogadorAzul.y < 375) jogadorAzul.y += 3;
  if (keys["a"] && jogadorAzul.x > 25) jogadorAzul.x -= 3;
  if (keys["d"] && jogadorAzul.x < 575) jogadorAzul.x += 3;

  if (!iaAtiva) {
    if (keys["ArrowUp"] && jogadorRosa.y > 25) jogadorRosa.y -= 3;
    if (keys["ArrowDown"] && jogadorRosa.y < 375) jogadorRosa.y += 3;
    if (keys["ArrowLeft"] && jogadorRosa.x > 25) jogadorRosa.x -= 3;
    if (keys["ArrowRight"] && jogadorRosa.x < 575) jogadorRosa.x += 3;
  } else {
    controlarIA();
  }
}

function controlarIA() {
  let dx = bola.x - jogadorRosa.x;
  let dy = bola.y - jogadorRosa.y;
  if (Math.abs(dx) > 5) jogadorRosa.x += dx > 0 ? 2 : -2;
  if (Math.abs(dy) > 5) jogadorRosa.y += dy > 0 ? 2 : -2;
}

function moverBola() {
  bola.x += bola.dx;
  bola.y += bola.dy;
  bola.dx *= 0.98;
  bola.dy *= 0.98;

  if (bola.y - bola.raio < 10 || bola.y + bola.raio > 390) bola.dy *= -1;

  if (bola.x + bola.raio > 590 && bola.y > 150 && bola.y < 250) {
    golsAzul++;
    atualizarPlacar();
    reiniciarPosicoes();
  }
  if (bola.x - bola.raio < 10 && bola.y > 150 && bola.y < 250) {
    golsRosa++;
    atualizarPlacar();
    reiniciarPosicoes();
  }
  if (bola.x - bola.raio < 10 || bola.x + bola.raio > 590) bola.dx *= -1;
}

function detectarColisao(j) {
  const dx = bola.x - j.x;
  const dy = bola.y - j.y;
  const dist = Math.sqrt(dx * dx + dy * dy);
  if (dist < 25) {
    bola.dx = dx * 0.2;
    bola.dy = dy * 0.2;
  }
}

function atualizarPlacar() {
  document.getElementById("placar").textContent = `Azul ${golsAzul} x ${golsRosa} Rosa`;
}

function reiniciarPosicoes() {
  jogadorAzul.x = 100; jogadorAzul.y = 200;
  jogadorRosa.x = 500; jogadorRosa.y = 200;
  bola.x = 300; bola.y = 200; bola.dx = bola.dy = 0;
}

function reiniciarJogo() {
  golsAzul = 0; golsRosa = 0;
  reiniciarPosicoes();
  atualizarPlacar();
}

document.getElementById("ativarIA").addEventListener("change", (e) => {
  iaAtiva = e.target.checked;
});

function atualizar() {
  desenharCampo();
  moverJogadores();
  moverBola();
  detectarColisao(jogadorAzul);
  detectarColisao(jogadorRosa);
  desenharJogador(jogadorAzul);
  desenharJogador(jogadorRosa);
  desenharBola();
  requestAnimationFrame(atualizar);
}

atualizar();
</script>
</body>
</html>
